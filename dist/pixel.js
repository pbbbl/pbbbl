"use strict";function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var skillstruckDemo,skillstruckHelp={example:"\nvar skillstruck = new SkillStruckPixel({\n    id: 'skill-struck-pixel',\n    hosts: {\n        live: 'campus.skillstruck.com',\n        test: 'test-campus.skillstruck.com'\n    },\n    onUser: (data) => {\n        return dispatchUser(data);\n    }\n});",hosts:"Please provide an object with valid url hosts (window.location.hosts) for live and test sites.",user:"This object will contain user data or it will be false if the user is unauthorized",id:"You must provide a valid DOM id for this property.",onUser:'Event that is ran by the pixel whenever auth changes. \nYou can also listen for the frame event "user"; "user" event bubbles, and can be heard on "window", too.'};function SkillStruckPixel(e){var t=_objectSpread({user:{authorized:!1},env:!1,origin:null,frame:i,src:null,host:window.location.host,on:{user:function user(e){var t=_objectSpread({},e.user);return window.dispatchEvent(new CustomEvent("user",{bubbles:!0,detail:_objectSpread({},t)})),e.onUser(_objectSpread({},t))},failed:function failed(e){var t=_objectSpread({},e.user);return window.dispatchEvent(new CustomEvent("user",{bubbles:!0,detail:_objectSpread({},t)})),e.onFailed?e.onFailed(_objectSpread({},t)):e.on.user(e)},imposter:function imposter(e){if(e.onImposter)return e.onImposter(_objectSpread({},e))}},help:buildSkillStruckHelp()},e),r="https://test.skillstruck.com",n="https://test.skillstruck.com",o="https://my.skillstruck.com";e.demo?(t.src="https://test.skillstruck.com/account/auth.pixel?key=".concat(e.demo),t.origin=r,t.env="demo"):e.test?(t.src="https://test.skillstruck.com/account/auth.pixel",t.origin=n,t.env="test"):(t.src="https://my.skillstruck.com/account/auth.pixel",t.origin=o,t.env="live");var s=!1;window.addEventListener("message",(function(e){!function frameEvent(e){return e.data.authorized&&e.origin!==t.origin?t.on.imposter(e):e.origin!==t.origin||s?void 0:(s=!0,t.user=_objectSpread({},e.data),t.user.pro=t.user.premium||!1,t.user.authorized?t.on.user(t):t.on.failed(t))}(e)}));var i=skillstruckPixelDOM(e);return i?(i.src=t.src,t.frame=i,t):console.error("Element not found with ID: "+e.id)}function buildSkillStruckHelp(){for(var e=skillstruckHelp,t="=============== BEGIN HELP ===============\n",r=Object.keys(e),n=0;n<r.length;n++){var o=r[n];if(t+="\n".concat(o.toUpperCase(),": \n").concat(e[o],"\n\n"),n+1>=r.length)return t+="\n=============== END HELP ==============="}}function skillstruckPixelDOM(e){var t=e.id,r=(e.src,document.createElement("div"));return r.setAttribute("id","".concat(t,"-container")),r.style.cssText="display: none !important;",r.classList.add("d-none"),document.body.appendChild(r),(r=document.getElementById("".concat(t,"-container"))).innerHTML='<iframe style="display: none;" id="'.concat(t,'" src=""></iframe>'),document.getElementById(t)}function skillstruckParams(e,t){e=e.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}function skillstruckCookie(e,t){var r=!!(Cookies.get(e)||window.sessionStorage.getItem(e)||window.localStorage.getItem(e)||t)&&t();return!!r&&(Cookies.set(e,r,{expires:30}),window.sessionStorage.setItem(e,r),window.localStorage.setItem(e,r),r=Cookies.get(e))}
