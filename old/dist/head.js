"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var postItem,db,dbItems;console.log("v-0.3.5");var proPost=!1,dbData={ready:!1,items:{},item:{},libraries:{},library:{},user:{}},campus=document.getElementsByTagName("html")[0],app={ready:{db:!1,jquery:!1,authorized:!1},db:!1,auth:null,user:null},$onReady=function $onReady(e){if(console.log("$onReadyRan"),"undefined"!=typeof $)return e($);window.addEventListener("$",(function(t){for(var r=t.details.$;void 0!==r;){return function $runCallback(e){return e(r)}((function(){return e(newJquery)}))}}))},isDev=authLoc.indexOf("dev=true")>-1,awaitJquery=[],awaiting=[],adminSessionId=universalCookie("adminSessionId",(function(){var e=getUrlParam("admin",window.location.href)||!1;return e=!(!e||""==e)&&e})),isDemo=universalCookie("skillStruckDemo",(function(){var e=getUrlParam("demo",window.location.href)||!1;return!(!(e=!(!e||""==e))||!adminSessionId)&&adminSessionId}));function devRun(e){e&&window.location.href.indexOf("dev=true")>-1&&e()}function lastStepToRender(e){e.authorized&&$("html, body,.campus-body").addClass("show authorized")}function runAwaiting(e){if(awaiting&&awaiting.length)for(var t=0;t<awaiting.length;t++)awaiting[t](e)}function runAwaitJquery(e){if(awaitJquery&&awaitJquery.length){for(var t=0;t<awaitJquery.length;t++)awaitJquery[t](e);t+1>=awaitJquery.length&&lastStepToRender(auth)}}function getTs(){return(new Date).getTime()}function getThisEl(e,t){var r=(e=$(e)).attr("id")||!1;return r||(e.attr("id","campus-id-".concat(t)),r=e.attr("id")),e=$("#".concat(r))}function getStateData(e,t){var r=e.indexOf(".")>-1&&e.split(".");return r?multiIndex(t,r):t[e]||!1}function multiIndex(e,t){return t.length?multiIndex(e[t[0]],t.slice(1)):e||!1}function getUrlParam(e,t){e=e.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}function universalCookie(e,t){var r=t?t():Coookies.get(e)||!1;return!!r&&(Cookies.set(e,r),r=Cookies.get(e))}function devlog(e){if(isDev)return console.log(e)}function newEl(e,t){var r=e.attr("id")||!1;return r||(r="custom-".concat(e.prop("tagName").toLowerCase(),"-").concat(t),e.attr("id",r)),e=$("#".concat(r))}function getNonSearchForm(e){return!(!!(e.attr("action")||!1)&&("/search"==e.attr("action")||e.attr("action").indexOf("search")>-1))&&e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function on$(e){campus.addEventListener("jquery",(function(t){var r=t.detail.data;if(e)return e(r,t)}))}function onAuth(e){campus.addEventListener("authorized",(function(t){var r=t.detail.data;if(e)return e(r,t)}))}function onDb(e){campus.addEventListener("db",(function(t){var r=t.detail.data;if(e)return e(r,t)}))}function onReady(e){campus.addEventListener("ready",(function(t){var r=t.detail.data;if(e)return e(r,t)}))}function dispatchCampusEvent(e,t){campus.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:{data:t}})),checkIfReady(ready)}function checkIfReady(){var e=_objectSpread({},app.ready);if(e.jquery&&e.authorized&&e.db)return app.ready=!0,dispatchReady.apply(void 0,_toConsumableArray(app))}function dispatchReady(e){return dispatchCampusEvent("ready",e)}function dispatchJquery(e){return dispatchCampusEvent("$",e)}function dispatchAuthorized(e){return dispatchCampusEvent("authorized",e)}function dispatchDb(e){return dispatchCampusEvent("db",e)}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}window.addEventListener("dbReady",(function(e){$((function(){runAwaiting(dbData)}))})),awaitJquery.push((function(e){if(e.isLive&&($("[data-is-live-remove]").each((function(){if("test-campus.skillstruck.com"==window.location.hostname&&($(this).attr("data-is-live-test-show")||!1))return;$(this).remove()})),$("[data-is-live-show]").each((function(){if("test-campus.skillstruck.com"==window.location.hostname&&($(this).attr("data-is-live-test-remove")||!1))return void $(this).remove()}))),e.isLive&&($("[data-is-test-remove]").each((function(){if("test-campus.skillstruck.com"==window.location.hostname&&($(this).attr("data-is-live-test-show")||!1))return;$(this).remove()})),$("[data-is-test-show]").each((function(){if("test-campus.skillstruck.com"==window.location.hostname&&($(this).attr("data-is-live-test-remove")||!1))return void $(this).remove()}))),e.isDemo?($("[data-pro-remove]").remove(),$("[data-demo-remove]").remove(),$("[data-demo-show]").show()):($("[data-demo-only]").remove(),$("[data-demo-show]").remove()),e.user.pro?($("[data-pro-remove]").remove(),$("[data-pro-required]").remove()):$("[data-pro-show]").remove(),_typeof(postItem)!=undefined&&postItem&&(postItem&&!postItem.proItem?($("[data-pro-remove]").remove(),$("[data-pro-required]").remove()):($("[data-pro-remove]").remove(),$("[data-pro-required]").remove(),e.user.pro?$("[data-pro-remove]").remove():$("[data-pro-required]").remove())),e.user.image){var t=$("[data-set-user-image-bg]")||!1;t&&t.css("background-image","url("+e.user.image+")")}($("[data-req-path]")||!1)&&$("[data-req-path]").each((function(){var e=$(this).attr("data-req-path")||!1;e&&window.location.pathname!=e&&$(this).remove()}));var r=document.querySelectorAll("form")||!1;r&&r.length&&$("form").each((function(t){var r=getNonSearchForm(newEl($(this),t));if(r)for(var n=[{name:"accountIsDemo",value:e.isDemo},{name:"user_organization",value:e.user.organization||"Failed to find Data"},{name:"user_school",value:e.user.school||"Failed to find Data"}],a=0;a<n.length;a++){var o=n[a],i="added-input-".concat(o.name,"-").concat(a);r.append('<input hidden="true" style="display: none !important" id="added-input-'.concat(i,'" name="').concat(o.name,'" value="').concat(o.value||"false",'"/>'))}}))}));var page={url:window.location.href,collection:null,item:null,items:{},collections:{},render:function render(e){if(e)return e(this)}},pathArray=window.location.pathname.split("/"),pageSlug=pathArray[pathArray.length-1];function runPage(e,t){var r=window.localStorage.getItem(e.id)||!1;return page=_objectSpread(r?_objectSpread(_objectSpread({},page),r):_objectSpread({},page),e),t?t(page):page}function addItem(e){var t;page.items[e.id]=page.item=_objectSpread({id:null,index:null,slug:null,name:null,cid:null,cslug:null,library:null,active:t===e.slug,voted:!1,votes:0,season:[null,null],score:null,fields:[]},e),(t=(t=window.location.href.indexOf("/")>-1?window.location.href.split("/"):[""])[t.length-1])===page.items[e.id].slug&&(page.item=page.items[e.id]),page.collection&&page.collection.items&&page.collection.items.push(page.items[e.id])}function addCollection(e){return page.collections[e.cid]=_objectSpread({cid:null,slug:null,name:null,library:null,active:null,items:[],fields:[],ts:null},e),e.active&&(page.collection=page.collections[e.cid]),page.collections[e.cid]}var libSlug=window.location.pathname,slugIndex=(libSlug=libSlug.split("/")).length-1;function editButtonSetup(){$(".form-group.read-only").each((function(){var e=$(this).attr("id");e||($(this).attr("id",$(this).find("[id]").attr("id")+"-group"),e=$(this).attr("id"));var t=$("#"+e),r=$("#"+e+" .control");if(r||(r=$("#"+e+" input, #"+e+" textarea, #"+e+" select"))){var n=$("#"+e+" label"),a=r.val(),o=r.attr("name");$(this).prepend('<button type="button" class="button button-text edit-button" aria-label="Edit '+o+" ("+a+')">Edit</button>');var i=$(this).find(".edit-button");editButtonListen(i,t,n,r),setTimeout((function(){if(r=$("#"+e+" .control"),!(a=r.val())||""===a.trim())return i.remove(),void t.removeClass("read-only");i.attr("aria-label","Edit "+o+" ("+a+")")}),5e3)}}))}function editButtonClicked(e,t){e.removeClass("read-only"),t.remove()}function editButtonListen(e,t,r,n){e.on("click",(function(){editButtonClicked(t,e)}))}function requireSlug(e){e||(e=document.querySelectorAll("[data-require-slug]"));for(var t=0;t<e.length;t++){var r=e[t],n=r.dataset.requireSlug;if(n.indexOf(",")>-1)for(var a=n.split(","),o=!1,i=0;i<a.length;i++)(o||a[i]==libSlug)&&(o=!0),i+1>=a.length&&(o||r.remove());else n.indexOf("!")>-1?libSlug===n&&r.remove():libSlug!==n&&r.remove()}}function setFormValues(e){for(var t=document.querySelectorAll("[data-get-value]"),r={uid:e.uid,name:(e.first||"")+" "+(e.last||""),email:e.email||auth.email||auth.user.email||"",location:window.location.href},n=0;n<t.length;n++){var a=t[n],o=a.dataset.getValue;r[o]&&(a.value=r[o])}}libSlug=libSlug[slugIndex],window.addEventListener("DOMContentLoaded",(function(e){requireSlug(),setTimeout((function(){for(var e=[document.querySelectorAll("html")[0],document.querySelectorAll("body")[0],document.querySelectorAll(".campus-body")[0]],t=0;t<e.length;t++){e[t].className+=" authorized show"}}),3e3)})),window.addEventListener("authorized",(function(e){setFormValues(e.detail.auth.user)})),awaiting.push(editButtonSetup);var ranShowIf=!1;function $get(){for(;"undefined"!=typeof $;)return $}function onAuthorized_inHead(){campus.addEventListener("authorized",(function(e){return runPostIfShow(e.detail.user)})),console.log("onAuthorized_inHead ran!"),awaitUserData()}function awaitUserData(){return setTimeout((function(){return ranShowIf||auth&&auth.user&&auth.user.id?!ranShowIf&&auth.user.id?runPostIfShow(auth.user,!0):void 0:awaitUserData()}),50)}function runPostIfShow(e,t){if(!ranShowIf){ranShowIf=!0;var r=$("[data-fallback]"),n=$("[data-is-pro]"),a=$("[data-no-pro]");return proPost&&1==proPost?e.premium&&!1!==e.premium?runIfShow(n):runIfShow(r):runIfShow(a)}}function runIfShow(e){e.each((function(e){var t=$(this),r="data-if-show-display";if(t.attr(r)){var n=t.attr(r);n||(n="block");var a=t.attr("style")||"";t.attr("style",a+"display:"+n+" !important;")}}))}function getToc(){var e=$(".post-main-content");if(e.length&&e.length>1)return console.log("too many .post-main-content waiting 150"),setTimeout((function(){return getToc()}),150);var t="campus-post-main-content";e.attr("id",t);var r="#"+t;e=$(r);var n=r+" h2",a=$(n),o=r+" h3",i=$(o),u=r+" h4",l=$(u),c=n;a.length<4&&i&&i.length&&i.length>0&&(c+=", "+o),i.length<4&&l&&l.length&&l.length>0&&(c+=", "+u);var s=$(c),d=$(".toc-col");if(d&&d.length&&d.length>0&&s&&s.length&&s.length>0){var f=$(".toc-col .toc-list"),p=s.length;f.html(""),s.each((function(e){var t,r,n,a;if((r=(t=$(this)).text())&&r.length){r=r.toLowerCase();var o=/[\W_]+/g;if(o.test(r)){var i=(r=r.replace(o,"-")).length-1;"-"===r.charAt(i)&&(r=r.slice(0,i))}n=r,t.attr("id",n),a='<li id="'+n+'-link" class="toc-li"><a href="#'+n+'" class="toc-link is-'+t.prop("tagName").toLowerCase()+'"><span class="toc-link-text">'+t.text()+"</span></a></li>",f.append(a)}e+1>=p&&(d.show(),window.location.hash===n&&scrollToHash())}))}}$onReady((function(e){console.log("head running with $ working",$),onAuthorized_inHead()})),$((function(){$(".main-section.tabs-list-section.w-tab-menu").attr("id","secondary-navbar");var e=$("#primary-navbar").height()+1.5*$("#secondary-navbar").height();topTarget=e+e/2,$(".toc-col .toc-list").html(""),getToc()}));var topTarget=60,navHeights=0;function scrollToHash(){var e=$(window.location.hash);if(console.log($("body").hasClass("show")),!$("body").hasClass("show")&&!$("body").hasClass("authorized")&&e)return setTimeout((function(){return scrollToHash()}),150);console.log("trying"),$("html, body").animate({scrollTop:e.offset().top-topTarget},500)}function hashCheck(){$(".main-section.tabs-list-section.w-tab-menu").attr("id","secondary-navbar");var e=$("#primary-navbar").height()+1.5*$("#secondary-navbar").height();topTarget=e+e/2,$('a[href^="#"]::before').each((function(){var e=$(this).attr("href");$("#"+e)&&$("#"+e+":before").attr("style",'content:""; display:block; height:'+topTarget+"px; margin:-"+topTarget+"px 0 0; ")})),scrollToHash()}